        </br>
        </br>
        </br>
        <div class="footer">
            
        </div>
    </div>
</div>

<!-- Mainly scripts -->
<script src="/js/jquery-3.1.1.min.js"></script>
<script src="/js/jquery-2.1.1.js"></script>
<script src="/js/popper.min.js"></script>
<script src="/js/bootstrap.js"></script>
<script src="/js/plugins/metisMenu/jquery.metisMenu.js"></script>
<script src="/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

<!-- Flot -->
<script src="/js/plugins/flot/jquery.flot.js"></script>
<script src="/js/plugins/flot/jquery.flot.tooltip.min.js"></script>
<script src="/js/plugins/flot/jquery.flot.spline.js"></script>
<script src="/js/plugins/flot/jquery.flot.resize.js"></script>
<script src="/js/plugins/flot/jquery.flot.pie.js"></script>

<!-- Peity -->
<script src="/js/plugins/peity/jquery.peity.min.js"></script>
<script src="/js/demo/peity-demo.js"></script>

<!-- Custom and plugin javascript -->
<script src="/js/inspinia.js"></script>
<script src="/js/plugins/pace/pace.min.js"></script>

<!-- jQuery UI -->
<script src="/js/plugins/jquery-ui/jquery-ui.min.js"></script>

<!-- GITTER -->
<script src="/js/plugins/gritter/jquery.gritter.min.js"></script>

<!-- Sparkline -->
<script src="/js/plugins/sparkline/jquery.sparkline.min.js"></script>

<!-- Sparkline demo data  -->
<script src="/js/demo/sparkline-demo.js"></script>

<!-- ChartJS-->
<script src="/js/plugins/chartJs/Chart.min.js"></script>

<!-- Toastr -->
<script src="/js/plugins/toastr/toastr.min.js"></script>

<!-- DataTables -->
<script src="/js/plugins/dataTables/datatables.min.js"></script>
<script src="/js/plugins/dataTables/dataTables.bootstrap4.min.js"></script>

<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script src="/js/moment.js"></script>

<script src="/js/cleave-js/cleave.min.js"></script>

<% if(typeof alert != 'undefined') { %>
    <script>
        Swal.fire({
            title: '<%= alertTitle %>',
            text: '<%= alertMessage %>',
            icon: '<%= alertIcon %>',
            showConfirmButton: <%= showConfirmButton %>,
            timer: <%= timer %>
        }).then(()=>{
            window.location='/<%= ruta %>'
        })
    </script>
<% } %>

<script>
    var separador = document.getElementsByClassName('number_format');
    for (var i = 0 ; i < separador.length; i++) {
        separador[i].addEventListener('input', (e) => {
            var entrada = e.target.value.split(','),
            parteEntera = entrada[0].replace(/\./g, ''),
            parteDecimal = entrada[1],
            salida = parteEntera.replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1.");
            e.target.value = salida + (parteDecimal !== undefined ? ',' + parteDecimal.replace(/([0-9])([0-9]{2})$/,'') : '');
        }, false); 
    }
</script>

<script>
    var separador = document.getElementsByClassName('cedula_rif');
    for (var i = 0 ; i < separador.length; i++) {
        separador[i].addEventListener('input', (e) => {
            var entrada = e.target.value.split(',');
            var parteEntera = entrada[0].replace(/\./g, '');
            var salida = parteEntera.replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1.");
            if ((salida.charAt(0) === 'J') || (salida.charAt(0) === 'G') || (salida.charAt(0) === 'V')) {
                var parteRif = entrada[0];
                e.target.value = parteRif;
            } else {
                e.target.value = salida;
            }
        }, false); 
    }
</script>

<script>
    window.addEventListener("load", function() {
        document.getElementById("radioContainer").addEventListener("click", function() {
            document.getElementById("active-select-1").style.display = document.getElementById("fraccionamiento_boolean_recibo").checked ? "inline" : "none";
            document.getElementById("active-select-2").style.display = document.getElementById("fraccionamiento_boolean_recibo").checked ? "inline" : "none";
        });
    });
</script>

<% if (typeof(receipt) !== 'undefined') { %>
    <% if (typeof(policy) !== 'undefined') { %>
        <script>
            let receipt = <%- JSON.stringify(receipt) %>;
            let policy = <%- JSON.stringify(policy) %>;
            let policies = <%- JSON.stringify(policies) %>;
            let collectives = <%- JSON.stringify(collectives) %>;
            function premiumCalculationDate() {
                var numPolicyCollective = document.getElementById("numero_poliza_colectivo").value;
                var getSelectValue = document.getElementById("tipo_fraccionamiento_recibo").value;
                var checkboxDivision = document.getElementById("fraccionamiento_boolean_recibo").checked;
                if (getSelectValue === 'MENSUAL') {
                    $(document).ready(function () {
                        $('#tipo_fraccionamiento_recibo').change(function () {
                            var extraer = $('#fecha_desde_recibo').val();
                            extraer = extraer.split('-');
                            year = parseInt(extraer[0]);
                            month = parseInt(extraer[1]) - 1;
                            day = parseInt(extraer[2]);
                            var fecha = moment([year, month, day]).add(1, 'months');
                            fecha = fecha.toISOString().substring(0, 10);
                            $('#fecha_pago_recibo').val(fecha);
                        });
                    });
                    $(document).ready(function () {
                        $('#fecha_desde_recibo').change(function () {
                            var extraer = $('#fecha_desde_recibo').val();
                            extraer = extraer.split('-');
                            year = parseInt(extraer[0]);
                            month = parseInt(extraer[1]) - 1;
                            day = parseInt(extraer[2]);
                            var fecha = moment([year, month, day]).add(1, 'months');
                            fecha = fecha.toISOString().substring(0, 10);
                            $('#fecha_hasta_recibo').val(fecha);
                        });
                    });
                    var numberMonthly = document.getElementById("numero_pago_recibo").value;
                    if ((numberMonthly === '') || (numberMonthly === '0')) {
                        numberMonthly = 1;
                    }
                    var premiumMonthly = receipt.monto_prima_recibo / numberMonthly;
                    premiumMonthly = premiumMonthly.toFixed(2);
                    premiumMonthly = String(premiumMonthly);
                    if (numPolicyCollective === policy.numero_poliza) {
                        if (policy.tipo_moneda_poliza === 'BOLÍVAR') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: 'Bs ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: 'Bs ',
                            });
                            cleave.setRawValue(premiumMonthly);
                        } else if (policy.tipo_moneda_poliza === 'DÓLAR') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '$ ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '$ ',
                            });
                            cleave.setRawValue(premiumMonthly);
                        } else if (policy.tipo_moneda_poliza === 'EUROS') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '€ ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '€ ',
                            });
                            cleave.setRawValue(premiumMonthly);
                        }
                    } else {
                        let arrayPolicy = policies.filter(policy => policy.numero_poliza === numPolicyCollective);
                        let arrayCollective = collectives.filter(collective => collective.numero_colectivo === numPolicyCollective);
                        if (arrayCollective.length === 0) {
                            if (arrayPolicy[0].tipo_moneda_poliza === 'BOLÍVAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                cleave.setRawValue(premiumMonthly);
                            } else if (arrayPolicy[0].tipo_moneda_poliza === 'DÓLAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                cleave.setRawValue(premiumMonthly);
                            } else if (arrayPolicy[0].tipo_moneda_poliza === 'EUROS') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                cleave.setRawValue(premiumMonthly);
                            }
                        } else {
                            if (arrayCollective[0].tipo_moneda_colectivo === 'BOLÍVAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                cleave.setRawValue(premiumMonthly);
                            } else if (arrayCollective[0].tipo_moneda_colectivo === 'DÓLAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                cleave.setRawValue(premiumMonthly);
                            } else if (arrayCollective[0].tipo_moneda_colectivo === 'EUROS') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                cleave.setRawValue(premiumMonthly);
                            }
                        }
                    }
                } else if (getSelectValue === 'BIMESTRAL') {
                    $(document).ready(function () {
                        $('#tipo_fraccionamiento_recibo').change(function () {
                            var extraer = $('#fecha_desde_recibo').val();
                            extraer = extraer.split('-');
                            year = parseInt(extraer[0]);
                            month = parseInt(extraer[1]) - 1;
                            day = parseInt(extraer[2]);
                            var fecha = moment([year, month, day]).add(2, 'months');
                            fecha = fecha.toISOString().substring(0, 10);
                            $('#fecha_pago_recibo').val(fecha);
                        });
                    });
                    $(document).ready(function () {
                        $('#fecha_desde_recibo').change(function () {
                            var extraer = $('#fecha_desde_recibo').val();
                            extraer = extraer.split('-');
                            year = parseInt(extraer[0]);
                            month = parseInt(extraer[1]) - 1;
                            day = parseInt(extraer[2]);
                            var fecha = moment([year, month, day]).add(2, 'months');
                            fecha = fecha.toISOString().substring(0, 10);
                            $('#fecha_hasta_recibo').val(fecha);
                        });
                    });
                    var premiumBimonthly = receipt.monto_prima_recibo / 6;
                    premiumBimonthly = String(premiumBimonthly);
                    document.getElementById("numero_pago_recibo").value = 6;
                    if (numPolicyCollective === policy.numero_poliza) {
                        if (policy.tipo_moneda_poliza === 'BOLÍVAR') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: 'Bs ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: 'Bs ',
                            });
                            cleave.setRawValue(premiumBimonthly);
                        } else if (policy.tipo_moneda_poliza === 'DÓLAR') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '$ ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '$ ',
                            });
                            cleave.setRawValue(premiumBimonthly);
                        } else if (policy.tipo_moneda_poliza === 'EUROS') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '€ ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '€ ',
                            });
                            cleave.setRawValue(premiumBimonthly);
                        }
                    } else {
                        let arrayPolicy = policies.filter(policy => policy.numero_poliza === numPolicyCollective);
                        let arrayCollective = collectives.filter(collective => collective.numero_colectivo === numPolicyCollective);
                        if (arrayCollective.length === 0) {
                            if (arrayPolicy[0].tipo_moneda_poliza === 'BOLÍVAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                cleave.setRawValue(premiumBimonthly);
                            } else if (arrayPolicy[0].tipo_moneda_poliza === 'DÓLAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                cleave.setRawValue(premiumBimonthly);
                            } else if (arrayPolicy[0].tipo_moneda_poliza === 'EUROS') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                cleave.setRawValue(premiumBimonthly);
                            }
                        } else {
                            if (arrayCollective[0].tipo_moneda_colectivo === 'BOLÍVAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                cleave.setRawValue(premiumBimonthly);
                            } else if (arrayCollective[0].tipo_moneda_colectivo === 'DÓLAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                cleave.setRawValue(premiumBimonthly);
                            } else if (arrayCollective[0].tipo_moneda_colectivo === 'EUROS') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                cleave.setRawValue(premiumBimonthly);
                            }
                        }
                    }
                } else if (getSelectValue === 'TRIMESTRAL') {
                    $(document).ready(function () {
                        $('#tipo_fraccionamiento_recibo').change(function () {
                            var extraer = $('#fecha_desde_recibo').val();
                            extraer = extraer.split('-');
                            year = parseInt(extraer[0]);
                            month = parseInt(extraer[1]) - 1;
                            day = parseInt(extraer[2]);
                            var fecha = moment([year, month, day]).add(3, 'months');
                            fecha = fecha.toISOString().substring(0, 10);
                            $('#fecha_pago_recibo').val(fecha);
                        });
                    });
                    $(document).ready(function () {
                        $('#fecha_desde_recibo').change(function () {
                            var extraer = $('#fecha_desde_recibo').val();
                            extraer = extraer.split('-');
                            year = parseInt(extraer[0]);
                            month = parseInt(extraer[1]) - 1;
                            day = parseInt(extraer[2]);
                            var fecha = moment([year, month, day]).add(3, 'months');
                            fecha = fecha.toISOString().substring(0, 10);
                            $('#fecha_hasta_recibo').val(fecha);
                        });
                    });
                    var premiumQuarterly = receipt.monto_prima_recibo / 4;
                    premiumQuarterly = String(premiumQuarterly);
                    document.getElementById("numero_pago_recibo").value = 4;
                    if (numPolicyCollective === policy.numero_poliza) {
                        if (policy.tipo_moneda_poliza === 'BOLÍVAR') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: 'Bs ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: 'Bs ',
                            });
                            cleave.setRawValue(premiumQuarterly);
                        } else if (policy.tipo_moneda_poliza === 'DÓLAR') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '$ ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '$ ',
                            });
                            cleave.setRawValue(premiumQuarterly);
                        } else if (policy.tipo_moneda_poliza === 'EUROS') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '€ ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '€ ',
                            });
                            cleave.setRawValue(premiumQuarterly);
                        }
                    } else {
                        let arrayPolicy = policies.filter(policy => policy.numero_poliza === numPolicyCollective);
                        let arrayCollective = collectives.filter(collective => collective.numero_colectivo === numPolicyCollective);
                        if (arrayCollective.length === 0) {
                            if (arrayPolicy[0].tipo_moneda_poliza === 'BOLÍVAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                cleave.setRawValue(premiumQuarterly);
                            } else if (arrayPolicy[0].tipo_moneda_poliza === 'DÓLAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                cleave.setRawValue(premiumQuarterly);
                            } else if (arrayPolicy[0].tipo_moneda_poliza === 'EUROS') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                cleave.setRawValue(premiumQuarterly);
                            }
                        } else {
                            if (arrayCollective[0].tipo_moneda_colectivo === 'BOLÍVAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                cleave.setRawValue(premiumQuarterly);
                            } else if (arrayCollective[0].tipo_moneda_colectivo === 'DÓLAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                cleave.setRawValue(premiumQuarterly);
                            } else if (arrayCollective[0].tipo_moneda_colectivo === 'EUROS') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                cleave.setRawValue(premiumQuarterly);
                            }
                        }
                    }
                } else if (getSelectValue === 'SEMESTRAL') {
                    $(document).ready(function () {
                        $('#tipo_fraccionamiento_recibo').change(function () {
                            var extraer = $('#fecha_desde_recibo').val();
                            extraer = extraer.split('-');
                            year = parseInt(extraer[0]);
                            month = parseInt(extraer[1]) - 1;
                            day = parseInt(extraer[2]);
                            var fecha = moment([year, month, day]).add(6, 'months');
                            fecha = fecha.toISOString().substring(0, 10);
                            $('#fecha_pago_recibo').val(fecha);
                        });
                    });
                    $(document).ready(function () {
                        $('#fecha_desde_recibo').change(function () {
                            var extraer = $('#fecha_desde_recibo').val();
                            extraer = extraer.split('-');
                            year = parseInt(extraer[0]);
                            month = parseInt(extraer[1]) - 1;
                            day = parseInt(extraer[2]);
                            var fecha = moment([year, month, day]).add(6, 'months');
                            fecha = fecha.toISOString().substring(0, 10);
                            $('#fecha_hasta_recibo').val(fecha);
                        });
                    });
                    var premiumBiannual = receipt.monto_prima_recibo / 2;
                    premiumBiannual = String(premiumBiannual);
                    document.getElementById("numero_pago_recibo").value = 2;
                    if (numPolicyCollective === policy.numero_poliza) {
                        if (policy.tipo_moneda_poliza === 'BOLÍVAR') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: 'Bs ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: 'Bs ',
                            });
                            cleave.setRawValue(premiumBiannual);
                        } else if (policy.tipo_moneda_poliza === 'DÓLAR') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '$ ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '$ ',
                            });
                            cleave.setRawValue(premiumBiannual);
                        } else if (policy.tipo_moneda_poliza === 'EUROS') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '€ ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '€ ',
                            });
                            cleave.setRawValue(premiumBiannual);
                        }
                    } else {
                        let arrayPolicy = policies.filter(policy => policy.numero_poliza === numPolicyCollective);
                        let arrayCollective = collectives.filter(collective => collective.numero_colectivo === numPolicyCollective);
                        if (arrayCollective.length === 0) {
                            if (arrayPolicy[0].tipo_moneda_poliza === 'BOLÍVAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                cleave.setRawValue(premiumBiannual);
                            } else if (arrayPolicy[0].tipo_moneda_poliza === 'DÓLAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                cleave.setRawValue(premiumBiannual);
                            } else if (arrayPolicy[0].tipo_moneda_poliza === 'EUROS') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                cleave.setRawValue(premiumBiannual);
                            }
                        } else {
                            if (arrayCollective[0].tipo_moneda_colectivo === 'BOLÍVAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                cleave.setRawValue(premiumBiannual);
                            } else if (arrayCollective[0].tipo_moneda_colectivo === 'DÓLAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                cleave.setRawValue(premiumBiannual);
                            } else if (arrayCollective[0].tipo_moneda_colectivo === 'EUROS') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                cleave.setRawValue(premiumBiannual);
                            }
                        }
                    }
                }  else if (getSelectValue === 'ANUAL') {
                    $(document).ready(function () {
                        $('#tipo_fraccionamiento_recibo').change(function () {
                            var extraer = $('#fecha_desde_recibo').val();
                            extraer = extraer.split('-');
                            year = parseInt(extraer[0]);
                            month = parseInt(extraer[1]) - 1;
                            day = parseInt(extraer[2]);
                            var fecha = moment([year, month, day]).add(1, 'years');
                            fecha = fecha.toISOString().substring(0, 10);
                            $('#fecha_pago_recibo').val(fecha);
                        });
                    });
                    $(document).ready(function () {
                        $('#fecha_desde_recibo').change(function () {
                            var extraer = $('#fecha_desde_recibo').val();
                            extraer = extraer.split('-');
                            year = parseInt(extraer[0]);
                            month = parseInt(extraer[1]) - 1;
                            day = parseInt(extraer[2]);
                            var fecha = moment([year, month, day]).add(1, 'years');
                            fecha = fecha.toISOString().substring(0, 10);
                            $('#fecha_hasta_recibo').val(fecha);
                        });
                    });
                    var annualPremium = receipt.monto_prima_recibo / 1;
                    annualPremium = String(annualPremium);
                    document.getElementById("numero_pago_recibo").value = 1;
                    if (numPolicyCollective === policy.numero_poliza) {
                        if (policy.tipo_moneda_poliza === 'BOLÍVAR') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: 'Bs ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: 'Bs ',
                            });
                            cleave.setRawValue(annualPremium);
                        } else if (policy.tipo_moneda_poliza === 'DÓLAR') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '$ ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '$ ',
                            });
                            cleave.setRawValue(annualPremium);
                        } else if (policy.tipo_moneda_poliza === 'EUROS') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '€ ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '€ ',
                            });
                            cleave.setRawValue(annualPremium);
                        }
                    } else {
                        let arrayPolicy = policies.filter(policy => policy.numero_poliza === numPolicyCollective);
                        let arrayCollective = collectives.filter(collective => collective.numero_colectivo === numPolicyCollective);
                        if (arrayCollective.length === 0) {
                            if (arrayPolicy[0].tipo_moneda_poliza === 'BOLÍVAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                cleave.setRawValue(annualPremium);
                            } else if (arrayPolicy[0].tipo_moneda_poliza === 'DÓLAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                cleave.setRawValue(annualPremium);
                            } else if (arrayPolicy[0].tipo_moneda_poliza === 'EUROS') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                cleave.setRawValue(annualPremium);
                            }
                        } else {
                            if (arrayCollective[0].tipo_moneda_colectivo === 'BOLÍVAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                cleave.setRawValue(annualPremium);
                            } else if (arrayCollective[0].tipo_moneda_colectivo === 'DÓLAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                cleave.setRawValue(annualPremium);
                            } else if (arrayCollective[0].tipo_moneda_colectivo === 'EUROS') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                cleave.setRawValue(annualPremium);
                            }
                        }
                    }
                }
                if (checkboxDivision === false) {
                    if (numPolicyCollective === policy.numero_poliza) {
                        if (policy.tipo_moneda_poliza === 'BOLÍVAR') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: 'Bs ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: 'Bs ',
                            });
                            cleave.setRawValue(receipt.monto_prima_recibo);
                        } else if (policy.tipo_moneda_poliza === 'DÓLAR') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '$ ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '$ ',
                            });
                            cleave.setRawValue(receipt.monto_prima_recibo);
                        } else if (policy.tipo_moneda_poliza === 'EUROS') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '€ ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '€ ',
                            });
                            cleave.setRawValue(receipt.monto_prima_recibo);
                        }
                    } else {
                        let arrayPolicy = policies.filter(policy => policy.numero_poliza === numPolicyCollective);
                        let arrayCollective = collectives.filter(collective => collective.numero_colectivo === numPolicyCollective);
                        if (arrayCollective.length === 0) {
                            if (arrayPolicy[0].tipo_moneda_poliza === 'BOLÍVAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                cleave.setRawValue(receipt.monto_prima_recibo);
                            } else if (arrayPolicy[0].tipo_moneda_poliza === 'DÓLAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                cleave.setRawValue(receipt.monto_prima_recibo);
                            } else if (arrayPolicy[0].tipo_moneda_poliza === 'EUROS') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                cleave.setRawValue(receipt.monto_prima_recibo);
                            }
                        } else {
                            if (arrayCollective[0].tipo_moneda_colectivo === 'BOLÍVAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                cleave.setRawValue(receipt.monto_prima_recibo);
                            } else if (arrayCollective[0].tipo_moneda_colectivo === 'DÓLAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                cleave.setRawValue(receipt.monto_prima_recibo);
                            } else if (arrayCollective[0].tipo_moneda_colectivo === 'EUROS') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                cleave.setRawValue(receipt.monto_prima_recibo);
                            }
                        }
                    }
                    document.getElementById("numero_pago_recibo").value = 0;
                    document.getElementById("tipo_fraccionamiento_recibo").value = '';
                    document.getElementById("fecha_pago_recibo").value = '';
                    document.getElementById("fecha_desde_recibo").value = '';
                    document.getElementById("fecha_hasta_recibo").value = '';
                }
            }
        </script>
    <% } else { %>
        <script>
            let receipt = <%- JSON.stringify(receipt) %>;
            let collective = <%- JSON.stringify(collective) %>;
            let policies = <%- JSON.stringify(policies) %>;
            let collectives = <%- JSON.stringify(collectives) %>;
            function premiumCalculationDate() {
                var numPolicyCollective = document.getElementById("numero_poliza_colectivo").value;
                var getSelectValue = document.getElementById("tipo_fraccionamiento_recibo").value;
                var checkboxDivision = document.getElementById("fraccionamiento_boolean_recibo").checked;
                if (getSelectValue === 'MENSUAL') {
                    $(document).ready(function () {
                        $('#tipo_fraccionamiento_recibo').change(function () {
                            var extraer = $('#fecha_desde_recibo').val();
                            extraer = extraer.split('-');
                            year = parseInt(extraer[0]);
                            month = parseInt(extraer[1]) - 1;
                            day = parseInt(extraer[2]);
                            var fecha = moment([year, month, day]).add(1, 'months');
                            fecha = fecha.toISOString().substring(0, 10);
                            $('#fecha_pago_recibo').val(fecha);
                        });
                    });
                    $(document).ready(function () {
                        $('#fecha_desde_recibo').change(function () {
                            var extraer = $('#fecha_desde_recibo').val();
                            extraer = extraer.split('-');
                            year = parseInt(extraer[0]);
                            month = parseInt(extraer[1]) - 1;
                            day = parseInt(extraer[2]);
                            var fecha = moment([year, month, day]).add(1, 'months');
                            fecha = fecha.toISOString().substring(0, 10);
                            $('#fecha_hasta_recibo').val(fecha);
                        });
                    });
                    var numberMonthly = document.getElementById("numero_pago_recibo").value;
                    if ((numberMonthly === '') || (numberMonthly === '0')) {
                        numberMonthly = 1;
                    }
                    var premiumMonthly = receipt.monto_prima_recibo / numberMonthly;
                    premiumMonthly = premiumMonthly.toFixed(2);
                    premiumMonthly = String(premiumMonthly);
                    if (numPolicyCollective === collective.numero_colectivo) {
                        if (collective.tipo_moneda_colectivo === 'BOLÍVAR') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: 'Bs ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: 'Bs ',
                            });
                            cleave.setRawValue(premiumMonthly);
                        } else if (collective.tipo_moneda_colectivo === 'DÓLAR') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '$ ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '$ ',
                            });
                            cleave.setRawValue(premiumMonthly);
                        } else if (collective.tipo_moneda_colectivo === 'EUROS') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '€ ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '€ ',
                            });
                            cleave.setRawValue(premiumMonthly);
                        }
                    } else {
                        let arrayPolicy = policies.filter(policy => policy.numero_poliza === numPolicyCollective);
                        let arrayCollective = collectives.filter(collective => collective.numero_colectivo === numPolicyCollective);
                        if (arrayCollective.length === 0) {
                            if (arrayPolicy[0].tipo_moneda_poliza === 'BOLÍVAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                cleave.setRawValue(premiumMonthly);
                            } else if (arrayPolicy[0].tipo_moneda_poliza === 'DÓLAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                cleave.setRawValue(premiumMonthly);
                            } else if (arrayPolicy[0].tipo_moneda_poliza === 'EUROS') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                cleave.setRawValue(premiumMonthly);
                            }
                        } else {
                            if (arrayCollective[0].tipo_moneda_colectivo === 'BOLÍVAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                cleave.setRawValue(premiumMonthly);
                            } else if (arrayCollective[0].tipo_moneda_colectivo === 'DÓLAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                cleave.setRawValue(premiumMonthly);
                            } else if (arrayCollective[0].tipo_moneda_colectivo === 'EUROS') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                cleave.setRawValue(premiumMonthly);
                            }
                        }
                    }
                } else if (getSelectValue === 'BIMESTRAL') {
                    $(document).ready(function () {
                        $('#tipo_fraccionamiento_recibo').change(function () {
                            var extraer = $('#fecha_desde_recibo').val();
                            extraer = extraer.split('-');
                            year = parseInt(extraer[0]);
                            month = parseInt(extraer[1]) - 1;
                            day = parseInt(extraer[2]);
                            var fecha = moment([year, month, day]).add(2, 'months');
                            fecha = fecha.toISOString().substring(0, 10);
                            $('#fecha_pago_recibo').val(fecha);
                        });
                    });
                    $(document).ready(function () {
                        $('#fecha_desde_recibo').change(function () {
                            var extraer = $('#fecha_desde_recibo').val();
                            extraer = extraer.split('-');
                            year = parseInt(extraer[0]);
                            month = parseInt(extraer[1]) - 1;
                            day = parseInt(extraer[2]);
                            var fecha = moment([year, month, day]).add(2, 'months');
                            fecha = fecha.toISOString().substring(0, 10);
                            $('#fecha_hasta_recibo').val(fecha);
                        });
                    });
                    var premiumBimonthly = receipt.monto_prima_recibo / 6;
                    premiumBimonthly = String(premiumBimonthly);
                    document.getElementById("numero_pago_recibo").value = 6;
                    if (numPolicyCollective === collective.numero_colectivo) {
                        if (collective.tipo_moneda_colectivo === 'BOLÍVAR') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: 'Bs ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: 'Bs ',
                            });
                            cleave.setRawValue(premiumBimonthly);
                        } else if (collective.tipo_moneda_colectivo === 'DÓLAR') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '$ ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '$ ',
                            });
                            cleave.setRawValue(premiumBimonthly);
                        } else if (collective.tipo_moneda_colectivo === 'EUROS') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '€ ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '€ ',
                            });
                            cleave.setRawValue(premiumBimonthly);
                        }
                    } else {
                        let arrayPolicy = policies.filter(policy => policy.numero_poliza === numPolicyCollective);
                        let arrayCollective = collectives.filter(collective => collective.numero_colectivo === numPolicyCollective);
                        if (arrayCollective.length === 0) {
                            if (arrayPolicy[0].tipo_moneda_poliza === 'BOLÍVAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                cleave.setRawValue(premiumBimonthly);
                            } else if (arrayPolicy[0].tipo_moneda_poliza === 'DÓLAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                cleave.setRawValue(premiumBimonthly);
                            } else if (arrayPolicy[0].tipo_moneda_poliza === 'EUROS') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                cleave.setRawValue(premiumBimonthly);
                            }
                        } else {
                            if (arrayCollective[0].tipo_moneda_colectivo === 'BOLÍVAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                cleave.setRawValue(premiumBimonthly);
                            } else if (arrayCollective[0].tipo_moneda_colectivo === 'DÓLAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                cleave.setRawValue(premiumBimonthly);
                            } else if (arrayCollective[0].tipo_moneda_colectivo === 'EUROS') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                cleave.setRawValue(premiumBimonthly);
                            }
                        }
                    }
                } else if (getSelectValue === 'TRIMESTRAL') {
                    $(document).ready(function () {
                        $('#tipo_fraccionamiento_recibo').change(function () {
                            var extraer = $('#fecha_desde_recibo').val();
                            extraer = extraer.split('-');
                            year = parseInt(extraer[0]);
                            month = parseInt(extraer[1]) - 1;
                            day = parseInt(extraer[2]);
                            var fecha = moment([year, month, day]).add(3, 'months');
                            fecha = fecha.toISOString().substring(0, 10);
                            $('#fecha_pago_recibo').val(fecha);
                        });
                    });
                    $(document).ready(function () {
                        $('#fecha_desde_recibo').change(function () {
                            var extraer = $('#fecha_desde_recibo').val();
                            extraer = extraer.split('-');
                            year = parseInt(extraer[0]);
                            month = parseInt(extraer[1]) - 1;
                            day = parseInt(extraer[2]);
                            var fecha = moment([year, month, day]).add(3, 'months');
                            fecha = fecha.toISOString().substring(0, 10);
                            $('#fecha_hasta_recibo').val(fecha);
                        });
                    });
                    var premiumQuarterly = receipt.monto_prima_recibo / 4;
                    premiumQuarterly = String(premiumQuarterly);
                    document.getElementById("numero_pago_recibo").value = 4;
                    if (numPolicyCollective === collective.numero_colectivo) {
                        if (collective.tipo_moneda_colectivo === 'BOLÍVAR') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: 'Bs ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: 'Bs ',
                            });
                            cleave.setRawValue(premiumQuarterly);
                        } else if (collective.tipo_moneda_colectivo === 'DÓLAR') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '$ ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '$ ',
                            });
                            cleave.setRawValue(premiumQuarterly);
                        } else if (collective.tipo_moneda_colectivo === 'EUROS') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '€ ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '€ ',
                            });
                            cleave.setRawValue(premiumQuarterly);
                        }
                    } else {
                        let arrayPolicy = policies.filter(policy => policy.numero_poliza === numPolicyCollective);
                        let arrayCollective = collectives.filter(collective => collective.numero_colectivo === numPolicyCollective);
                        if (arrayCollective.length === 0) {
                            if (arrayPolicy[0].tipo_moneda_poliza === 'BOLÍVAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                cleave.setRawValue(premiumQuarterly);
                            } else if (arrayPolicy[0].tipo_moneda_poliza === 'DÓLAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                cleave.setRawValue(premiumQuarterly);
                            } else if (arrayPolicy[0].tipo_moneda_poliza === 'EUROS') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                cleave.setRawValue(premiumQuarterly);
                            }
                        } else {
                            if (arrayCollective[0].tipo_moneda_colectivo === 'BOLÍVAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                cleave.setRawValue(premiumQuarterly);
                            } else if (arrayCollective[0].tipo_moneda_colectivo === 'DÓLAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                cleave.setRawValue(premiumQuarterly);
                            } else if (arrayCollective[0].tipo_moneda_colectivo === 'EUROS') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                cleave.setRawValue(premiumQuarterly);
                            }
                        }
                    }
                } else if (getSelectValue === 'SEMESTRAL') {
                    $(document).ready(function () {
                        $('#tipo_fraccionamiento_recibo').change(function () {
                            var extraer = $('#fecha_desde_recibo').val();
                            extraer = extraer.split('-');
                            year = parseInt(extraer[0]);
                            month = parseInt(extraer[1]) - 1;
                            day = parseInt(extraer[2]);
                            var fecha = moment([year, month, day]).add(6, 'months');
                            fecha = fecha.toISOString().substring(0, 10);
                            $('#fecha_pago_recibo').val(fecha);
                        });
                    });
                    $(document).ready(function () {
                        $('#fecha_desde_recibo').change(function () {
                            var extraer = $('#fecha_desde_recibo').val();
                            extraer = extraer.split('-');
                            year = parseInt(extraer[0]);
                            month = parseInt(extraer[1]) - 1;
                            day = parseInt(extraer[2]);
                            var fecha = moment([year, month, day]).add(6, 'months');
                            fecha = fecha.toISOString().substring(0, 10);
                            $('#fecha_hasta_recibo').val(fecha);
                        });
                    });
                    var premiumBiannual = receipt.monto_prima_recibo / 2;
                    premiumBiannual = String(premiumBiannual);
                    document.getElementById("numero_pago_recibo").value = 2;
                    if (numPolicyCollective === collective.numero_colectivo) {
                        if (collective.tipo_moneda_colectivo === 'BOLÍVAR') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: 'Bs ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: 'Bs ',
                            });
                            cleave.setRawValue(premiumBiannual);
                        } else if (collective.tipo_moneda_colectivo === 'DÓLAR') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '$ ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '$ ',
                            });
                            cleave.setRawValue(premiumBiannual);
                        } else if (collective.tipo_moneda_colectivo === 'EUROS') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '€ ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '€ ',
                            });
                            cleave.setRawValue(premiumBiannual);
                        }
                    } else {
                        let arrayPolicy = policies.filter(policy => policy.numero_poliza === numPolicyCollective);
                        let arrayCollective = collectives.filter(collective => collective.numero_colectivo === numPolicyCollective);
                        if (arrayCollective.length === 0) {
                            if (arrayPolicy[0].tipo_moneda_poliza === 'BOLÍVAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                cleave.setRawValue(premiumBiannual);
                            } else if (arrayPolicy[0].tipo_moneda_poliza === 'DÓLAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                cleave.setRawValue(premiumBiannual);
                            } else if (arrayPolicy[0].tipo_moneda_poliza === 'EUROS') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                cleave.setRawValue(premiumBiannual);
                            }
                        } else {
                            if (arrayCollective[0].tipo_moneda_colectivo === 'BOLÍVAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                cleave.setRawValue(premiumBiannual);
                            } else if (arrayCollective[0].tipo_moneda_colectivo === 'DÓLAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                cleave.setRawValue(premiumBiannual);
                            } else if (arrayCollective[0].tipo_moneda_colectivo === 'EUROS') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                cleave.setRawValue(premiumBiannual);
                            }
                        }
                    }
                }  else if (getSelectValue === 'ANUAL') {
                    $(document).ready(function () {
                        $('#tipo_fraccionamiento_recibo').change(function () {
                            var extraer = $('#fecha_desde_recibo').val();
                            extraer = extraer.split('-');
                            year = parseInt(extraer[0]);
                            month = parseInt(extraer[1]) - 1;
                            day = parseInt(extraer[2]);
                            var fecha = moment([year, month, day]).add(1, 'years');
                            fecha = fecha.toISOString().substring(0, 10);
                            $('#fecha_pago_recibo').val(fecha);
                        });
                    });
                    $(document).ready(function () {
                        $('#fecha_desde_recibo').change(function () {
                            var extraer = $('#fecha_desde_recibo').val();
                            extraer = extraer.split('-');
                            year = parseInt(extraer[0]);
                            month = parseInt(extraer[1]) - 1;
                            day = parseInt(extraer[2]);
                            var fecha = moment([year, month, day]).add(1, 'years');
                            fecha = fecha.toISOString().substring(0, 10);
                            $('#fecha_hasta_recibo').val(fecha);
                        });
                    });
                    var annualPremium = receipt.monto_prima_recibo / 1;
                    annualPremium = String(annualPremium);
                    document.getElementById("numero_pago_recibo").value = 1;
                    if (numPolicyCollective === collective.numero_colectivo) {
                        if (collective.tipo_moneda_colectivo === 'BOLÍVAR') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: 'Bs ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: 'Bs ',
                            });
                            cleave.setRawValue(annualPremium);
                        } else if (collective.tipo_moneda_colectivo === 'DÓLAR') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '$ ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '$ ',
                            });
                            cleave.setRawValue(annualPremium);
                        } else if (collective.tipo_moneda_colectivo === 'EUROS') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '€ ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '€ ',
                            });
                            cleave.setRawValue(annualPremium);
                        }
                    } else {
                        let arrayPolicy = policies.filter(policy => policy.numero_poliza === numPolicyCollective);
                        let arrayCollective = collectives.filter(collective => collective.numero_colectivo === numPolicyCollective);
                        if (arrayCollective.length === 0) {
                            if (arrayPolicy[0].tipo_moneda_poliza === 'BOLÍVAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                cleave.setRawValue(annualPremium);
                            } else if (arrayPolicy[0].tipo_moneda_poliza === 'DÓLAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                cleave.setRawValue(annualPremium);
                            } else if (arrayPolicy[0].tipo_moneda_poliza === 'EUROS') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                cleave.setRawValue(annualPremium);
                            }
                        } else {
                            if (arrayCollective[0].tipo_moneda_colectivo === 'BOLÍVAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                cleave.setRawValue(annualPremium);
                            } else if (arrayCollective[0].tipo_moneda_colectivo === 'DÓLAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                cleave.setRawValue(annualPremium);
                            } else if (arrayCollective[0].tipo_moneda_colectivo === 'EUROS') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                cleave.setRawValue(annualPremium);
                            }
                        }
                    }
                }
                if (checkboxDivision === false) {
                    if (numPolicyCollective === collective.numero_colectivo) {
                        if (collective.tipo_moneda_colectivo === 'BOLÍVAR') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: 'Bs ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: 'Bs ',
                            });
                            cleave.setRawValue(receipt.monto_prima_recibo);
                        } else if (collective.tipo_moneda_colectivo === 'DÓLAR') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '$ ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '$ ',
                            });
                            cleave.setRawValue(receipt.monto_prima_recibo);
                        } else if (collective.tipo_moneda_colectivo === 'EUROS') {
                            let cleave = new Cleave("#monto_prima_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '€ ',
                            });
                            new Cleave("#monto_comision_recibo", {
                                numeral: true,
                                numeralDecimalMark: ',',
                                delimiter: '.',
                                prefix: '€ ',
                            });
                            cleave.setRawValue(receipt.monto_prima_recibo);
                        }
                    } else {
                        let arrayPolicy = policies.filter(policy => policy.numero_poliza === numPolicyCollective);
                        let arrayCollective = collectives.filter(collective => collective.numero_colectivo === numPolicyCollective);
                        if (arrayCollective.length === 0) {
                            if (arrayPolicy[0].tipo_moneda_poliza === 'BOLÍVAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                cleave.setRawValue(receipt.monto_prima_recibo);
                            } else if (arrayPolicy[0].tipo_moneda_poliza === 'DÓLAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                cleave.setRawValue(receipt.monto_prima_recibo);
                            } else if (arrayPolicy[0].tipo_moneda_poliza === 'EUROS') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                cleave.setRawValue(receipt.monto_prima_recibo);
                            }
                        } else {
                            if (arrayCollective[0].tipo_moneda_colectivo === 'BOLÍVAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: 'Bs ',
                                });
                                cleave.setRawValue(receipt.monto_prima_recibo);
                            } else if (arrayCollective[0].tipo_moneda_colectivo === 'DÓLAR') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '$ ',
                                });
                                cleave.setRawValue(receipt.monto_prima_recibo);
                            } else if (arrayCollective[0].tipo_moneda_colectivo === 'EUROS') {
                                let cleave = new Cleave("#monto_prima_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                new Cleave("#monto_comision_recibo", {
                                    numeral: true,
                                    numeralDecimalMark: ',',
                                    delimiter: '.',
                                    prefix: '€ ',
                                });
                                cleave.setRawValue(receipt.monto_prima_recibo);
                            }
                        }
                    }
                    document.getElementById("numero_pago_recibo").value = 0;
                    document.getElementById("tipo_fraccionamiento_recibo").value = '';
                    document.getElementById("fecha_pago_recibo").value = '';
                    document.getElementById("fecha_desde_recibo").value = '';
                    document.getElementById("fecha_hasta_recibo").value = '';
                }
            }
        </script>
    <% } %>
<% } else { %>
    <script>
        let policies = <%- JSON.stringify(policies) %>;
        let collectives = <%- JSON.stringify(collectives) %>;
        function premiumCalculationDate() {
            var getSelectValue = document.getElementById("tipo_fraccionamiento_recibo").value;
            var checkboxDivision = document.getElementById("fraccionamiento_boolean_recibo").checked;
            var numPolicyCollective = document.getElementById("numero_poliza_colectivo").value;
            let arrayPolicy = policies.filter(policy => policy.numero_poliza === numPolicyCollective);
            let arrayCollective = collectives.filter(collective => collective.numero_colectivo === numPolicyCollective);
            if (arrayCollective.length === 0) {
                if (arrayPolicy[0].tipo_moneda_poliza === 'BOLÍVAR') {
                    new Cleave("#monto_prima_recibo", {
                        numeral: true,
                        numeralDecimalMark: ',',
                        delimiter: '.',
                        prefix: 'Bs ',
                    });
                    new Cleave("#monto_comision_recibo", {
                        numeral: true,
                        numeralDecimalMark: ',',
                        delimiter: '.',
                        prefix: 'Bs ',
                    });
                } else if (arrayPolicy[0].tipo_moneda_poliza === 'DÓLAR') {
                    new Cleave("#monto_prima_recibo", {
                        numeral: true,
                        numeralDecimalMark: ',',
                        delimiter: '.',
                        prefix: '$ ',
                    });
                    new Cleave("#monto_comision_recibo", {
                        numeral: true,
                        numeralDecimalMark: ',',
                        delimiter: '.',
                        prefix: '$ ',
                    });
                } else if (arrayPolicy[0].tipo_moneda_poliza === 'EUROS') {
                    new Cleave("#monto_prima_recibo", {
                        numeral: true,
                        numeralDecimalMark: ',',
                        delimiter: '.',
                        prefix: '€ ',
                    });
                    new Cleave("#monto_comision_recibo", {
                        numeral: true,
                        numeralDecimalMark: ',',
                        delimiter: '.',
                        prefix: '€ ',
                    });
                }
            } else {
                if (arrayCollective[0].tipo_moneda_colectivo === 'BOLÍVAR') {
                    new Cleave("#monto_prima_recibo", {
                        numeral: true,
                        numeralDecimalMark: ',',
                        delimiter: '.',
                        prefix: 'Bs ',
                    });
                    new Cleave("#monto_comision_recibo", {
                        numeral: true,
                        numeralDecimalMark: ',',
                        delimiter: '.',
                        prefix: 'Bs ',
                    });
                } else if (arrayCollective[0].tipo_moneda_colectivo === 'DÓLAR') {
                    new Cleave("#monto_prima_recibo", {
                        numeral: true,
                        numeralDecimalMark: ',',
                        delimiter: '.',
                        prefix: '$ ',
                    });
                    new Cleave("#monto_comision_recibo", {
                        numeral: true,
                        numeralDecimalMark: ',',
                        delimiter: '.',
                        prefix: '$ ',
                    });
                } else if (arrayCollective[0].tipo_moneda_colectivo === 'EUROS') {
                    new Cleave("#monto_prima_recibo", {
                        numeral: true,
                        numeralDecimalMark: ',',
                        delimiter: '.',
                        prefix: '€ ',
                    });
                    new Cleave("#monto_comision_recibo", {
                        numeral: true,
                        numeralDecimalMark: ',',
                        delimiter: '.',
                        prefix: '€ ',
                    });
                }
            }
            if (getSelectValue === 'MENSUAL') {
                $(document).ready(function () {
                    $('#tipo_fraccionamiento_recibo').change(function () {
                        var extraer = $('#fecha_desde_recibo').val();
                        extraer = extraer.split('-');
                        year = parseInt(extraer[0]);
                        month = parseInt(extraer[1]) - 1;
                        day = parseInt(extraer[2]);
                        var fecha = moment([year, month, day]).add(1, 'months');
                        fecha = fecha.toISOString().substring(0, 10);
                        $('#fecha_pago_recibo').val(fecha);
                    });
                });
                $(document).ready(function () {
                    $('#fecha_desde_recibo').change(function () {
                        var extraer = $('#fecha_desde_recibo').val();
                        extraer = extraer.split('-');
                        year = parseInt(extraer[0]);
                        month = parseInt(extraer[1]) - 1;
                        day = parseInt(extraer[2]);
                        var fecha = moment([year, month, day]).add(1, 'months');
                        fecha = fecha.toISOString().substring(0, 10);
                        $('#fecha_hasta_recibo').val(fecha);
                    });
                });
                document.getElementById("numero_pago_recibo").setAttribute("value", '');
            } else if (getSelectValue === 'BIMESTRAL') {
                $(document).ready(function () {
                    $('#tipo_fraccionamiento_recibo').change(function () {
                        var extraer = $('#fecha_desde_recibo').val();
                        extraer = extraer.split('-');
                        year = parseInt(extraer[0]);
                        month = parseInt(extraer[1]) - 1;
                        day = parseInt(extraer[2]);
                        var fecha = moment([year, month, day]).add(2, 'months');
                        fecha = fecha.toISOString().substring(0, 10);
                        $('#fecha_pago_recibo').val(fecha);
                    });
                });
                $(document).ready(function () {
                    $('#fecha_desde_recibo').change(function () {
                        var extraer = $('#fecha_desde_recibo').val();
                        extraer = extraer.split('-');
                        year = parseInt(extraer[0]);
                        month = parseInt(extraer[1]) - 1;
                        day = parseInt(extraer[2]);
                        var fecha = moment([year, month, day]).add(2, 'months');
                        fecha = fecha.toISOString().substring(0, 10);
                        $('#fecha_hasta_recibo').val(fecha);
                    });
                });
                document.getElementById("numero_pago_recibo").value = 6;
            } else if (getSelectValue === 'TRIMESTRAL') {
                $(document).ready(function () {
                    $('#tipo_fraccionamiento_recibo').change(function () {
                        var extraer = $('#fecha_desde_recibo').val();
                        extraer = extraer.split('-');
                        year = parseInt(extraer[0]);
                        month = parseInt(extraer[1]) - 1;
                        day = parseInt(extraer[2]);
                        var fecha = moment([year, month, day]).add(3, 'months');
                        fecha = fecha.toISOString().substring(0, 10);
                        $('#fecha_pago_recibo').val(fecha);
                    });
                });
                $(document).ready(function () {
                    $('#fecha_desde_recibo').change(function () {
                        var extraer = $('#fecha_desde_recibo').val();
                        extraer = extraer.split('-');
                        year = parseInt(extraer[0]);
                        month = parseInt(extraer[1]) - 1;
                        day = parseInt(extraer[2]);
                        var fecha = moment([year, month, day]).add(3, 'months');
                        fecha = fecha.toISOString().substring(0, 10);
                        $('#fecha_hasta_recibo').val(fecha);
                    });
                });
                document.getElementById("numero_pago_recibo").value = 4;
            } else if (getSelectValue === 'SEMESTRAL') {
                $(document).ready(function () {
                    $('#tipo_fraccionamiento_recibo').change(function () {
                        var extraer = $('#fecha_desde_recibo').val();
                        extraer = extraer.split('-');
                        year = parseInt(extraer[0]);
                        month = parseInt(extraer[1]) - 1;
                        day = parseInt(extraer[2]);
                        var fecha = moment([year, month, day]).add(6, 'months');
                        fecha = fecha.toISOString().substring(0, 10);
                        $('#fecha_pago_recibo').val(fecha);
                    });
                });
                $(document).ready(function () {
                    $('#fecha_desde_recibo').change(function () {
                        var extraer = $('#fecha_desde_recibo').val();
                        extraer = extraer.split('-');
                        year = parseInt(extraer[0]);
                        month = parseInt(extraer[1]) - 1;
                        day = parseInt(extraer[2]);
                        var fecha = moment([year, month, day]).add(6, 'months');
                        fecha = fecha.toISOString().substring(0, 10);
                        $('#fecha_hasta_recibo').val(fecha);
                    });
                });
                document.getElementById("numero_pago_recibo").value = 2;
            }  else if (getSelectValue === 'ANUAL') {
                $(document).ready(function () {
                    $('#tipo_fraccionamiento_recibo').change(function () {
                        var extraer = $('#fecha_desde_recibo').val();
                        extraer = extraer.split('-');
                        year = parseInt(extraer[0]);
                        month = parseInt(extraer[1]) - 1;
                        day = parseInt(extraer[2]);
                        var fecha = moment([year, month, day]).add(1, 'years');
                        fecha = fecha.toISOString().substring(0, 10);
                        $('#fecha_pago_recibo').val(fecha);
                    });
                });
                $(document).ready(function () {
                    $('#fecha_desde_recibo').change(function () {
                        var extraer = $('#fecha_desde_recibo').val();
                        extraer = extraer.split('-');
                        year = parseInt(extraer[0]);
                        month = parseInt(extraer[1]) - 1;
                        day = parseInt(extraer[2]);
                        var fecha = moment([year, month, day]).add(1, 'years');
                        fecha = fecha.toISOString().substring(0, 10);
                        $('#fecha_hasta_recibo').val(fecha);
                    });
                });
                document.getElementById("numero_pago_recibo").value = 1;
            }
            if (checkboxDivision === false) {
                document.getElementById("numero_pago_recibo").value = 0;
                document.getElementById("tipo_fraccionamiento_recibo").value = '';
                document.getElementById("fecha_pago_recibo").value = '';
                document.getElementById("fecha_desde_recibo").value = '';
                document.getElementById("fecha_hasta_recibo").value = '';
            }
        }
    </script>
<% } %>

<script>
    var naturalInsureds = <%- JSON.stringify(naturalInsureds) %>;
    var legalInsureds = <%- JSON.stringify(legalInsureds) %>;
    var ownAgents = <%- JSON.stringify(ownAgents) %>;
    function pasarAgentePropio() {
        let idRif = document.getElementById("id_rif_asegurado").value;
        if (idRif.startsWith('J') || idRif.startsWith('G')) {
            for (let i = 0; i < legalInsureds.length; i++) {
                let elementLegalInsured = legalInsureds[i];
                if (idRif === elementLegalInsured.rif_asegurado_per_jur) {
                    for (const ownAgent of ownAgents) { 
                        if (elementLegalInsured.agente_propio_id === ownAgent.id_agente_propio) {
                            document.getElementById("nombre_agente_propio").value = ownAgent.nombre_agente_propio + ' ' + ownAgent.apellido_agente_propio;
                            var percentajeOwnAgent = ownAgent.porcentaje_agente_propio
                            percentajeOwnAgent = percentajeOwnAgent.toFixed(2);
                            percentajeOwnAgent = percentajeOwnAgent.toString().replace('.', ',').replace(/(\d)(?=(\d{3})+(?!\d))/g,'$1.');
                            document.getElementById("porcentaje_agente_propio").value = percentajeOwnAgent;
                            break;
                        } else {
                            document.getElementById("nombre_agente_propio").value = '';
                            document.getElementById("porcentaje_agente_propio").value = '';
                        }
                    }
                    document.getElementById("nombre_razon_asegurado").value = elementLegalInsured.razon_social_per_jur;
                    if (document.getElementById("nombre_razon_asegurado").value !== '') {
                        break;
                    }
                } else {
                    document.getElementById("nombre_agente_propio").value = '';
                    document.getElementById("porcentaje_agente_propio").value = '';
                    document.getElementById("nombre_razon_asegurado").value = '';
                }
            }
        } else {
            for (let i = 0; i < naturalInsureds.length; i++) {
                let elementNaturalInsured = naturalInsureds[i];
                if (idRif === elementNaturalInsured.cedula_asegurado_per_nat) {
                    for (const ownAgent of ownAgents) { 
                        if (elementNaturalInsured.agente_propio_id === ownAgent.id_agente_propio) {
                            document.getElementById("nombre_agente_propio").value = ownAgent.nombre_agente_propio + ' ' + ownAgent.apellido_agente_propio;
                            var percentajeOwnAgent = ownAgent.porcentaje_agente_propio
                            percentajeOwnAgent = percentajeOwnAgent.toFixed(2);
                            percentajeOwnAgent = percentajeOwnAgent.toString().replace('.', ',').replace(/(\d)(?=(\d{3})+(?!\d))/g,'$1.');
                            document.getElementById("porcentaje_agente_propio").value = percentajeOwnAgent;
                            break;
                        } else {
                            document.getElementById("nombre_agente_propio").value = '';
                            document.getElementById("porcentaje_agente_propio").value = '';
                        }   
                    }
                    document.getElementById("nombre_razon_asegurado").value = elementNaturalInsured.nombre_asegurado_per_nat + ' ' + elementNaturalInsured.apellido_asegurado_per_nat;
                    if (document.getElementById("nombre_razon_asegurado").value !== '') {
                        break;
                    }
                } else {
                    document.getElementById("nombre_agente_propio").value = '';
                    document.getElementById("porcentaje_agente_propio").value = '';
                    document.getElementById("nombre_razon_asegurado").value = '';
                }  
            }
        }
    }
</script>

<script>
    var ownAgents = <%- JSON.stringify(ownAgents) %>;
    function pasarAgente() {
        var nameOwnAgent = document.getElementById("nombre_agente_propio").value;
        for (let i = 0; i < ownAgents.length; i++) {
            let elementOwnAgent = ownAgents[i];
            let names = elementOwnAgent.nombre_agente_propio + ' ' + elementOwnAgent.apellido_agente_propio;
            if (nameOwnAgent === names) {
                var percentajeOwnAgent = elementOwnAgent.porcentaje_agente_propio
                percentajeOwnAgent = percentajeOwnAgent.toFixed(2);
                percentajeOwnAgent = percentajeOwnAgent.toString().replace('.', ',').replace(/(\d)(?=(\d{3})+(?!\d))/g,'$1.');
                document.getElementById("porcentaje_agente_propio").value = percentajeOwnAgent;
                break;
            } else {
                document.getElementById("porcentaje_agente_propio").value = '';
            }
        }
    }
</script>

</body>

</html>